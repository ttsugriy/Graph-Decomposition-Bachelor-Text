\begin{algorithm}
  \caption{Перевірка на сумісність для рівня $k$}
  \label{alg:cons_test}
  \begin{algorithmic}[1]
    \FORALL{вершин $u$ в рівні $k-1$}
    \FORALL{вершин $u$ в рівні $k$ інцидентних $u$}
    \STATE{
      Перевірити, чи $f(u)$ та $f(v)$ різняться точно у одній компоненті
    }
    \STATE{
      Якщо ні тоді Об'єднання$(u^\prime,v;i)$ для всіх $u^\prime$ в рівні $k-1$ інцидентних $v$; $i$ - ненульова компонента $v$
    }
    \ENDFOR
    \FORALL{ актуальних компонент $i$}
    \STATE{
      Перевірити для всіх $uv$ в факторі $i$, $v$ в рівні $k$, чи існує ребро $u^\prime v^\prime = f(u,i)f(v,i)$
    }
    \STATE{
      Якщо ні, то Об'єднання$(u,v;i)$
    }
    \STATE{
      Перевірити для кожного ребра $u^\prime v^\prime$ в факторі $i$, $u^\prime = f(u,i)$, $v^\prime$ в рівні $l+1$, $u^\prime$ в рівні $l$, чи існує точно одне ребро $uv$, $v$ в рівні $k$ та $uv$ в факторі $i$, такі що $v^\prime = f(v,i)$
    }
    \STATE{
      Якщо ні, то Об'єднання$(u,v^\prime;i)$ \COMMENT{$v$ може не існувати}
    }
    \ENDFOR
    \ENDFOR
    \FORALL{вершин $u$ в рівні $k$}
    \STATE{Те ж саме, що і в кроках 1-12, за виключенням кроку 9, де $v^\prime$ та $u^\prime$ у одному рівні}
    \ENDFOR
  \end{algorithmic}
\end{algorithm}
